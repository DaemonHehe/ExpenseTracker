{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/lib/db.ts"],"sourcesContent":["import mongoose from \"mongoose\"\n\ninterface CachedConnection {\n  conn: typeof mongoose | null\n  promise: Promise<typeof mongoose> | null\n}\n\ndeclare global {\n  var myMongoose: CachedConnection | undefined\n}\n\nconst cached: CachedConnection = global.myMongoose || {\n  conn: null,\n  promise: null,\n}\n\nif (!global.myMongoose) {\n  global.myMongoose = cached\n}\n\nasync function connectDB() {\n  const uri = process.env.MONGODB_URI\n  if (!uri) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\")\n  }\n\n  if (cached.conn) {\n    return cached.conn\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    }\n\n    cached.promise = mongoose.connect(uri, opts).then((mongoose) => {\n      return mongoose\n    })\n  }\n\n  try {\n    cached.conn = await cached.promise\n  } catch (e) {\n    cached.promise = null\n    throw e\n  }\n\n  return cached.conn\n}\n\nexport default connectDB\n"],"names":[],"mappings":";;;;AAAA;;AAWA,MAAM,SAA2B,OAAO,UAAU,IAAI;IACpD,MAAM;IACN,SAAS;AACX;AAEA,IAAI,CAAC,OAAO,UAAU,EAAE;IACtB,OAAO,UAAU,GAAG;AACtB;AAEA,eAAe;IACb,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;IACnC,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,KAAK,MAAM,IAAI,CAAC,CAAC;YACjD,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/models/User.ts"],"sourcesContent":["import mongoose, { Schema, type Document, type Model } from \"mongoose\"\nimport bcrypt from \"bcryptjs\"\n\nexport interface IUser extends Document {\n  name: string\n  email: string\n  password: string\n  createdAt: Date\n  comparePassword(candidatePassword: string): Promise<boolean>\n}\n\nconst UserSchema = new Schema<IUser>(\n  {\n    name: {\n      type: String,\n      required: [true, \"Name is required\"],\n      trim: true,\n    },\n    email: {\n      type: String,\n      required: [true, \"Email is required\"],\n      unique: true,\n      lowercase: true,\n      trim: true,\n      match: [/^\\S+@\\S+\\.\\S+$/, \"Please provide a valid email\"],\n    },\n    password: {\n      type: String,\n      required: [true, \"Password is required\"],\n      minlength: [6, \"Password must be at least 6 characters\"],\n    },\n    createdAt: {\n      type: Date,\n      default: Date.now,\n    },\n  },\n  {\n    timestamps: true,\n  },\n)\n\n// Hash password before saving; mongoose runs async middleware as promises, so no `next` callback\nUserSchema.pre(\"save\", async function (this: IUser) {\n  if (!this.isModified(\"password\")) return\n\n  const salt = await bcrypt.genSalt(10)\n  this.password = await bcrypt.hash(this.password, salt)\n})\n\n// Method to compare passwords\nUserSchema.methods.comparePassword = async function (candidatePassword: string): Promise<boolean> {\n  return bcrypt.compare(candidatePassword, this.password)\n}\n\n// Prevent model recompilation in development\nconst User: Model<IUser> = mongoose.models.User || mongoose.model<IUser>(\"User\", UserSchema)\n\nexport default User\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAUA,MAAM,aAAa,IAAI,mHAAM,CAC3B;IACE,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAAmB;QACpC,MAAM;IACR;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAAoB;QACrC,QAAQ;QACR,WAAW;QACX,MAAM;QACN,OAAO;YAAC;YAAkB;SAA+B;IAC3D;IACA,UAAU;QACR,MAAM;QACN,UAAU;YAAC;YAAM;SAAuB;QACxC,WAAW;YAAC;YAAG;SAAyC;IAC1D;IACA,WAAW;QACT,MAAM;QACN,SAAS,KAAK,GAAG;IACnB;AACF,GACA;IACE,YAAY;AACd;AAGF,iGAAiG;AACjG,WAAW,GAAG,CAAC,QAAQ;IACrB,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa;IAElC,MAAM,OAAO,MAAM,8IAAM,CAAC,OAAO,CAAC;IAClC,IAAI,CAAC,QAAQ,GAAG,MAAM,8IAAM,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;AACnD;AAEA,8BAA8B;AAC9B,WAAW,OAAO,CAAC,eAAe,GAAG,eAAgB,iBAAyB;IAC5E,OAAO,8IAAM,CAAC,OAAO,CAAC,mBAAmB,IAAI,CAAC,QAAQ;AACxD;AAEA,6CAA6C;AAC7C,MAAM,OAAqB,oHAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,oHAAQ,CAAC,KAAK,CAAQ,QAAQ;uCAElE"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/lib/jwt.ts"],"sourcesContent":["import jwt from \"jsonwebtoken\"\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key-change-in-production\"\nconst JWT_EXPIRES_IN = process.env.JWT_EXPIRES_IN || \"7d\"\n\nexport interface TokenPayload {\n  userId: string\n  email: string\n}\n\nexport function signToken(payload: TokenPayload): string {\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: JWT_EXPIRES_IN })\n}\n\nexport function verifyToken(token: string): TokenPayload {\n  try {\n    return jwt.verify(token, JWT_SECRET) as TokenPayload\n  } catch (error) {\n    throw new Error(\"Invalid or expired token\")\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAC7C,MAAM,iBAAiB,QAAQ,GAAG,CAAC,cAAc,IAAI;AAO9C,SAAS,UAAU,OAAqB;IAC7C,OAAO,kJAAG,CAAC,IAAI,CAAC,SAAS,YAAY;QAAE,WAAW;IAAe;AACnE;AAEO,SAAS,YAAY,KAAa;IACvC,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/lib/api-response.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nexport interface ApiSuccessResponse<T = any> {\n  success: true\n  data: T\n  message?: string\n}\n\nexport interface ApiErrorResponse {\n  success: false\n  message: string\n}\n\nexport type ApiResponse<T = any> = ApiSuccessResponse<T> | ApiErrorResponse\n\nexport function successResponse<T>(data: T, message?: string, status = 200) {\n  return NextResponse.json(\n    {\n      success: true,\n      data,\n      message,\n    } as ApiSuccessResponse<T>,\n    { status },\n  )\n}\n\nexport function errorResponse(message: string, status = 400) {\n  return NextResponse.json(\n    {\n      success: false,\n      message,\n    } as ApiErrorResponse,\n    { status },\n  )\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAeO,SAAS,gBAAmB,IAAO,EAAE,OAAgB,EAAE,SAAS,GAAG;IACxE,OAAO,gJAAY,CAAC,IAAI,CACtB;QACE,SAAS;QACT;QACA;IACF,GACA;QAAE;IAAO;AAEb;AAEO,SAAS,cAAc,OAAe,EAAE,SAAS,GAAG;IACzD,OAAO,gJAAY,CAAC,IAAI,CACtB;QACE,SAAS;QACT;IACF,GACA;QAAE;IAAO;AAEb"}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/app/api/auth/login/route.ts"],"sourcesContent":["import type { NextRequest } from \"next/server\"\nimport connectDB from \"@/lib/db\"\nimport User from \"@/models/User\"\nimport { signToken } from \"@/lib/jwt\"\nimport { errorResponse, successResponse } from \"@/lib/api-response\"\n\nexport async function POST(req: NextRequest) {\n  try {\n    await connectDB()\n    const { email, password } = await req.json()\n\n    if (!email || !password) {\n      return errorResponse(\"Please provide email and password\", 400)\n    }\n\n    // Find user and include password for comparison\n    const user = await User.findOne({ email })\n    if (!user) {\n      return errorResponse(\"Invalid credentials\", 401)\n    }\n\n    // Check password\n    const isMatch = await user.comparePassword(password)\n    if (!isMatch) {\n      return errorResponse(\"Invalid credentials\", 401)\n    }\n\n    // Generate token\n    const token = signToken({ userId: user._id as string, email: user.email })\n\n    // Return user data and token\n    const userData = {\n      _id: user._id,\n      name: user.name,\n      email: user.email,\n    }\n\n    return successResponse({ user: userData, token }, \"Login successful\")\n  } catch (error: any) {\n    console.error(\"Login error:\", error)\n    return errorResponse(error.message || \"Internal server error\", 500)\n  }\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,IAAA,sHAAS;QACf,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAE1C,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,IAAA,yIAAa,EAAC,qCAAqC;QAC5D;QAEA,gDAAgD;QAChD,MAAM,OAAO,MAAM,2HAAI,CAAC,OAAO,CAAC;YAAE;QAAM;QACxC,IAAI,CAAC,MAAM;YACT,OAAO,IAAA,yIAAa,EAAC,uBAAuB;QAC9C;QAEA,iBAAiB;QACjB,MAAM,UAAU,MAAM,KAAK,eAAe,CAAC;QAC3C,IAAI,CAAC,SAAS;YACZ,OAAO,IAAA,yIAAa,EAAC,uBAAuB;QAC9C;QAEA,iBAAiB;QACjB,MAAM,QAAQ,IAAA,yHAAS,EAAC;YAAE,QAAQ,KAAK,GAAG;YAAY,OAAO,KAAK,KAAK;QAAC;QAExE,6BAA6B;QAC7B,MAAM,WAAW;YACf,KAAK,KAAK,GAAG;YACb,MAAM,KAAK,IAAI;YACf,OAAO,KAAK,KAAK;QACnB;QAEA,OAAO,IAAA,2IAAe,EAAC;YAAE,MAAM;YAAU;QAAM,GAAG;IACpD,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,OAAO,IAAA,yIAAa,EAAC,MAAM,OAAO,IAAI,yBAAyB;IACjE;AACF"}}]
}