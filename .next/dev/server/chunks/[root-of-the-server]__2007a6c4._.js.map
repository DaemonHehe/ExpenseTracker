{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/lib/db.ts"],"sourcesContent":["import mongoose from \"mongoose\"\n\ninterface CachedConnection {\n  conn: typeof mongoose | null\n  promise: Promise<typeof mongoose> | null\n}\n\ndeclare global {\n  var myMongoose: CachedConnection | undefined\n}\n\nconst cached: CachedConnection = global.myMongoose || {\n  conn: null,\n  promise: null,\n}\n\nif (!global.myMongoose) {\n  global.myMongoose = cached\n}\n\nasync function connectDB() {\n  const uri = process.env.MONGODB_URI\n  if (!uri) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\")\n  }\n\n  if (cached.conn) {\n    return cached.conn\n  }\n\n  if (!cached.promise) {\n    const opts = {\n      bufferCommands: false,\n    }\n\n    cached.promise = mongoose.connect(uri, opts).then((mongoose) => {\n      return mongoose\n    })\n  }\n\n  try {\n    cached.conn = await cached.promise\n  } catch (e) {\n    cached.promise = null\n    throw e\n  }\n\n  return cached.conn\n}\n\nexport default connectDB\n"],"names":[],"mappings":";;;;AAAA;;AAWA,MAAM,SAA2B,OAAO,UAAU,IAAI;IACpD,MAAM;IACN,SAAS;AACX;AAEA,IAAI,CAAC,OAAO,UAAU,EAAE;IACtB,OAAO,UAAU,GAAG;AACtB;AAEA,eAAe;IACb,MAAM,MAAM,QAAQ,GAAG,CAAC,WAAW;IACnC,IAAI,CAAC,KAAK;QACR,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,OAAO,IAAI,EAAE;QACf,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,MAAM,OAAO;YACX,gBAAgB;QAClB;QAEA,OAAO,OAAO,GAAG,oHAAQ,CAAC,OAAO,CAAC,KAAK,MAAM,IAAI,CAAC,CAAC;YACjD,OAAO;QACT;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;IACpC,EAAE,OAAO,GAAG;QACV,OAAO,OAAO,GAAG;QACjB,MAAM;IACR;IAEA,OAAO,OAAO,IAAI;AACpB;uCAEe"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/models/Expense.ts"],"sourcesContent":["import mongoose, { Schema, type Document, type Model } from \"mongoose\"\n\nexport interface IExpense extends Document {\n  user: mongoose.Types.ObjectId\n  title: string\n  amount: number\n  category: string\n  date: Date\n  notes?: string\n  createdAt: Date\n  updatedAt: Date\n}\n\nconst ExpenseSchema = new Schema<IExpense>(\n  {\n    user: {\n      type: Schema.Types.ObjectId,\n      ref: \"User\",\n      required: true,\n      index: true,\n    },\n    title: {\n      type: String,\n      required: [true, \"Title is required\"],\n      trim: true,\n    },\n    amount: {\n      type: Number,\n      required: [true, \"Amount is required\"],\n      min: [0.01, \"Amount must be greater than 0\"],\n    },\n    category: {\n      type: String,\n      required: [true, \"Category is required\"],\n      enum: [\"Food\", \"Transport\", \"Bills\", \"Shopping\", \"Entertainment\", \"Other\"],\n    },\n    date: {\n      type: Date,\n      required: [true, \"Date is required\"],\n      default: Date.now,\n    },\n    notes: {\n      type: String,\n      trim: true,\n      default: \"\",\n    },\n  },\n  {\n    timestamps: true,\n  },\n)\n\n// Compound index for user and date queries\nExpenseSchema.index({ user: 1, date: -1 })\nExpenseSchema.index({ user: 1, category: 1 })\n\nconst Expense: Model<IExpense> = mongoose.models.Expense || mongoose.model<IExpense>(\"Expense\", ExpenseSchema)\n\nexport default Expense\n"],"names":[],"mappings":";;;;AAAA;;AAaA,MAAM,gBAAgB,IAAI,mHAAM,CAC9B;IACE,MAAM;QACJ,MAAM,mHAAM,CAAC,KAAK,CAAC,QAAQ;QAC3B,KAAK;QACL,UAAU;QACV,OAAO;IACT;IACA,OAAO;QACL,MAAM;QACN,UAAU;YAAC;YAAM;SAAoB;QACrC,MAAM;IACR;IACA,QAAQ;QACN,MAAM;QACN,UAAU;YAAC;YAAM;SAAqB;QACtC,KAAK;YAAC;YAAM;SAAgC;IAC9C;IACA,UAAU;QACR,MAAM;QACN,UAAU;YAAC;YAAM;SAAuB;QACxC,MAAM;YAAC;YAAQ;YAAa;YAAS;YAAY;YAAiB;SAAQ;IAC5E;IACA,MAAM;QACJ,MAAM;QACN,UAAU;YAAC;YAAM;SAAmB;QACpC,SAAS,KAAK,GAAG;IACnB;IACA,OAAO;QACL,MAAM;QACN,MAAM;QACN,SAAS;IACX;AACF,GACA;IACE,YAAY;AACd;AAGF,2CAA2C;AAC3C,cAAc,KAAK,CAAC;IAAE,MAAM;IAAG,MAAM,CAAC;AAAE;AACxC,cAAc,KAAK,CAAC;IAAE,MAAM;IAAG,UAAU;AAAE;AAE3C,MAAM,UAA2B,oHAAQ,CAAC,MAAM,CAAC,OAAO,IAAI,oHAAQ,CAAC,KAAK,CAAW,WAAW;uCAEjF"}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/lib/jwt.ts"],"sourcesContent":["import jwt from \"jsonwebtoken\"\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key-change-in-production\"\nconst JWT_EXPIRES_IN = process.env.JWT_EXPIRES_IN || \"7d\"\n\nexport interface TokenPayload {\n  userId: string\n  email: string\n}\n\nexport function signToken(payload: TokenPayload): string {\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: JWT_EXPIRES_IN })\n}\n\nexport function verifyToken(token: string): TokenPayload {\n  try {\n    return jwt.verify(token, JWT_SECRET) as TokenPayload\n  } catch (error) {\n    throw new Error(\"Invalid or expired token\")\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,aAAa,QAAQ,GAAG,CAAC,UAAU,IAAI;AAC7C,MAAM,iBAAiB,QAAQ,GAAG,CAAC,cAAc,IAAI;AAO9C,SAAS,UAAU,OAAqB;IAC7C,OAAO,kJAAG,CAAC,IAAI,CAAC,SAAS,YAAY;QAAE,WAAW;IAAe;AACnE;AAEO,SAAS,YAAY,KAAa;IACvC,IAAI;QACF,OAAO,kJAAG,CAAC,MAAM,CAAC,OAAO;IAC3B,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 222, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/lib/auth-middleware.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { verifyToken } from \"./jwt\"\n\nexport interface AuthRequest extends NextRequest {\n  userId?: string\n}\n\nexport async function authenticateRequest(request: NextRequest): Promise<{ userId: string } | null> {\n  try {\n    const authHeader = request.headers.get(\"authorization\")\n\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n      return null\n    }\n\n    const token = authHeader.substring(7)\n    const decoded = verifyToken(token)\n\n    return { userId: decoded.userId }\n  } catch (error) {\n    return null\n  }\n}\n\nexport function createAuthResponse(message: string, status: number) {\n  return NextResponse.json({ success: false, message }, { status })\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAMO,eAAe,oBAAoB,OAAoB;IAC5D,IAAI;QACF,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QAEvC,IAAI,CAAC,cAAc,CAAC,WAAW,UAAU,CAAC,YAAY;YACpD,OAAO;QACT;QAEA,MAAM,QAAQ,WAAW,SAAS,CAAC;QACnC,MAAM,UAAU,IAAA,2HAAW,EAAC;QAE5B,OAAO;YAAE,QAAQ,QAAQ,MAAM;QAAC;IAClC,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,SAAS,mBAAmB,OAAe,EAAE,MAAc;IAChE,OAAO,gJAAY,CAAC,IAAI,CAAC;QAAE,SAAS;QAAO;IAAQ,GAAG;QAAE;IAAO;AACjE"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/lib/api-response.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\n\nexport interface ApiSuccessResponse<T = any> {\n  success: true\n  data: T\n  message?: string\n}\n\nexport interface ApiErrorResponse {\n  success: false\n  message: string\n}\n\nexport type ApiResponse<T = any> = ApiSuccessResponse<T> | ApiErrorResponse\n\nexport function successResponse<T>(data: T, message?: string, status = 200) {\n  return NextResponse.json(\n    {\n      success: true,\n      data,\n      message,\n    } as ApiSuccessResponse<T>,\n    { status },\n  )\n}\n\nexport function errorResponse(message: string, status = 400) {\n  return NextResponse.json(\n    {\n      success: false,\n      message,\n    } as ApiErrorResponse,\n    { status },\n  )\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAeO,SAAS,gBAAmB,IAAO,EAAE,OAAgB,EAAE,SAAS,GAAG;IACxE,OAAO,gJAAY,CAAC,IAAI,CACtB;QACE,SAAS;QACT;QACA;IACF,GACA;QAAE;IAAO;AAEb;AAEO,SAAS,cAAc,OAAe,EAAE,SAAS,GAAG;IACzD,OAAO,gJAAY,CAAC,IAAI,CACtB;QACE,SAAS;QACT;IACF,GACA;QAAE;IAAO;AAEb"}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///C:/Project/Simple%20Expense%20Tracker/app/api/analytics/monthly/route.ts"],"sourcesContent":["import type { NextRequest } from \"next/server\"\nimport connectDB from \"@/lib/db\"\nimport Expense from \"@/models/Expense\"\nimport { authenticateRequest, createAuthResponse } from \"@/lib/auth-middleware\"\nimport { errorResponse, successResponse } from \"@/lib/api-response\"\nimport mongoose from \"mongoose\"\n\n// GET /api/analytics/monthly - Get monthly trend data\nexport async function GET(req: NextRequest) {\n  try {\n    const authResult = await authenticateRequest(req)\n    if (!authResult) {\n      return createAuthResponse(\"Unauthorized\", 401)\n    }\n\n    await connectDB()\n    const userId = new mongoose.Types.ObjectId(authResult.userId)\n\n    // Get data for last 6 months\n    const sixMonthsAgo = new Date()\n    sixMonthsAgo.setMonth(sixMonthsAgo.getMonth() - 5)\n    sixMonthsAgo.setDate(1) // Start of the month\n\n    const monthlyData = await Expense.aggregate([\n      {\n        $match: {\n          user: userId,\n          date: { $gte: sixMonthsAgo },\n        },\n      },\n      {\n        $group: {\n          _id: {\n            year: { $year: \"$date\" },\n            month: { $month: \"$date\" },\n          },\n          total: { $sum: \"$amount\" },\n        },\n      },\n      {\n        $sort: { \"_id.year\": 1, \"_id.month\": 1 },\n      },\n    ])\n\n    // Format for charts\n    const monthNames = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n\n    // Fill in missing months\n    const formattedData = []\n    const current = new Date(sixMonthsAgo)\n    const now = new Date()\n\n    while (current <= now) {\n      const year = current.getFullYear()\n      const month = current.getMonth() + 1 // 1-12\n\n      const found = monthlyData.find((d) => d._id.year === year && d._id.month === month)\n\n      formattedData.push({\n        name: `${monthNames[month - 1]}`,\n        total: found ? found.total : 0,\n        fullDate: new Date(current),\n      })\n\n      current.setMonth(current.getMonth() + 1)\n    }\n\n    return successResponse(formattedData)\n  } catch (error: any) {\n    console.error(\"Analytics monthly error:\", error)\n    return errorResponse(\"Internal server error\", 500)\n  }\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;;;;;;AAGO,eAAe,IAAI,GAAgB;IACxC,IAAI;QACF,MAAM,aAAa,MAAM,IAAA,kJAAmB,EAAC;QAC7C,IAAI,CAAC,YAAY;YACf,OAAO,IAAA,iJAAkB,EAAC,gBAAgB;QAC5C;QAEA,MAAM,IAAA,sHAAS;QACf,MAAM,SAAS,IAAI,oHAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,MAAM;QAE5D,6BAA6B;QAC7B,MAAM,eAAe,IAAI;QACzB,aAAa,QAAQ,CAAC,aAAa,QAAQ,KAAK;QAChD,aAAa,OAAO,CAAC,IAAG,qBAAqB;QAE7C,MAAM,cAAc,MAAM,8HAAO,CAAC,SAAS,CAAC;YAC1C;gBACE,QAAQ;oBACN,MAAM;oBACN,MAAM;wBAAE,MAAM;oBAAa;gBAC7B;YACF;YACA;gBACE,QAAQ;oBACN,KAAK;wBACH,MAAM;4BAAE,OAAO;wBAAQ;wBACvB,OAAO;4BAAE,QAAQ;wBAAQ;oBAC3B;oBACA,OAAO;wBAAE,MAAM;oBAAU;gBAC3B;YACF;YACA;gBACE,OAAO;oBAAE,YAAY;oBAAG,aAAa;gBAAE;YACzC;SACD;QAED,oBAAoB;QACpB,MAAM,aAAa;YAAC;YAAO;YAAO;YAAO;YAAO;YAAO;YAAO;YAAO;YAAO;YAAO;YAAO;YAAO;SAAM;QAEvG,yBAAyB;QACzB,MAAM,gBAAgB,EAAE;QACxB,MAAM,UAAU,IAAI,KAAK;QACzB,MAAM,MAAM,IAAI;QAEhB,MAAO,WAAW,IAAK;YACrB,MAAM,OAAO,QAAQ,WAAW;YAChC,MAAM,QAAQ,QAAQ,QAAQ,KAAK,EAAE,OAAO;;YAE5C,MAAM,QAAQ,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,GAAG,CAAC,IAAI,KAAK,QAAQ,EAAE,GAAG,CAAC,KAAK,KAAK;YAE7E,cAAc,IAAI,CAAC;gBACjB,MAAM,GAAG,UAAU,CAAC,QAAQ,EAAE,EAAE;gBAChC,OAAO,QAAQ,MAAM,KAAK,GAAG;gBAC7B,UAAU,IAAI,KAAK;YACrB;YAEA,QAAQ,QAAQ,CAAC,QAAQ,QAAQ,KAAK;QACxC;QAEA,OAAO,IAAA,2IAAe,EAAC;IACzB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,IAAA,yIAAa,EAAC,yBAAyB;IAChD;AACF"}}]
}